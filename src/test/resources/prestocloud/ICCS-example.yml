tosca_definitions_version: tosca_prestocloud_mapping_1_2

metadata:
   template_name: ICCS generated types definition
   template_author: ICCS
   template_version: 1.0.0-SNAPSHOT
   CostThreshold: 1000.0
   TimePeriod:  720
   ProviderName_0: Amazon
   ProviderRequired_0: false
   ProviderExcluded_0: true
   ProviderName_1: Google_Cloud_compute
   ProviderRequired_1: true
   ProviderExcluded_1: false
   MaxInstances: 100
   MetricToMinimize: Cost
   MetricToMaximize: Clients_served_under_20ms

description: Types Description

imports:
   - tosca-normative-types:1.2
   - iccs-normative-types:1.0
   - resource-descriptions:1.0
   - placement-constraints:1.0

node_types:

   processing_node_eu_prestocloud_application_classes_AudioAnalytics_getData_0:
      description: A TOSCA description of a node
      derived_from: prestocloud.nodes.agent.jppf
      requirements:
         - host:
            capability: tosca.capabilities.Container
            node: prestocloud.nodes.compute
            relationship: tosca.relationships.HostedOn
            occurrences: [ 1,4 ]
            node_filter:
               capabilities:
                  - host:
                     properties:
                        - num_cpus: { in_range: [ 4,8 ] }
                        - mem_size: { in_range: [ 4,8 ] }
                        - disk_size: { in_range: [ 500,2000 ] }
                  - os:
                     properties:
                        - architecture: { valid_values: [ x86_64, i386, arm64, armel, armhf ] }
                        - type: { equal: linux }
                        - distribution: { equal: ubuntu }
                  - resource:
                     properties:
                        - type: { valid_values: [ cloud, edge ] }

   processing_node_eu_prestocloud_application_classes_AudioAnalytics_doNothing_1:
      description: A TOSCA description of a node
      derived_from: prestocloud.nodes.agent.jppf
      requirements:
         - host:
            capability: tosca.capabilities.Container
            node: prestocloud.nodes.compute
            relationship: tosca.relationships.HostedOn
            occurrences: [ 1,5 ]
            node_filter:
               capabilities:
                  - host:
                     properties:
                        - num_cpus: { in_range: [ 16,32 ] }
                        - mem_size: { in_range: [ 8,16 ] }
                        - disk_size: { in_range: [ 100,500 ] }
                  - os:
                     properties:
                        - architecture: { valid_values: [ x86_64, arm64, armel, armhf ] }
                        - type: { equal: linux }
                        - distribution: { equal: ubuntu }
                  - resource:
                     properties:
                        - type: { valid_values: [ cloud, edge ] }

   processing_node_eu_prestocloud_application_classes_AudioAnalytics_detectShout_2:
      description: A TOSCA description of a node
      derived_from: prestocloud.nodes.agent.jppf
      requirements:
         - host:
            capability: tosca.capabilities.Container
            node: prestocloud.nodes.compute
            relationship: tosca.relationships.HostedOn
            occurrences: [ 1,3 ]
            node_filter:
               capabilities:
                  - host:
                     properties:
                        - num_cpus: { in_range: [ 16,32 ] }
                        - mem_size: { in_range: [ 16,32 ] }
                        - disk_size: { in_range: [ 100,500 ] }
                  - os:
                     properties:
                        - architecture: { valid_values: [ x86_64, arm64, armel, armhf ] }
                        - type: { equal: linux }
                        - distribution: { equal: ubuntu }
                  - resource:
                     properties:
                        - type: { valid_values: [ cloud, edge ] }

   processing_node_eu_prestocloud_application_classes_AudioAnalytics_runAlgorithm_3:
      description: A TOSCA description of a node
      derived_from: prestocloud.nodes.agent.jppf
      requirements:
         - host:
            capability: tosca.capabilities.Container
            node: prestocloud.nodes.compute
            relationship: tosca.relationships.HostedOn
            occurrences: [ 1,3 ]
            node_filter:
               capabilities:
                  - host:
                     properties:
                        - num_cpus: { in_range: [ 8,16 ] }
                        - mem_size: { in_range: [ 8,16 ] }
                        - disk_size: { in_range: [ 2000,4000 ] }
                  - os:
                     properties:
                        - architecture: { valid_values: [ x86_64, arm64, armel, armhf ] }
                        - type: { equal: linux }
                        - distribution: { equal: ubuntu }
                  - resource:
                     properties:
                        - type: { valid_values: [ cloud, edge ] }

   processing_node_eu_prestocloud_application_classes_AudioAnalytics_testMethod2_4:
      description: A TOSCA description of a node
      derived_from: prestocloud.nodes.agent.jppf
      requirements:
         - host:
            capability: tosca.capabilities.Container
            node: prestocloud.nodes.compute
            relationship: tosca.relationships.HostedOn
            occurrences: [ 1,1 ]
            node_filter:
               capabilities:
                  - host:
                     properties:
                        - num_cpus: { in_range: [ 4,8 ] }
                        - mem_size: { in_range: [ 4,8 ] }
                        - disk_size: { in_range: [ 40,100 ] }
                  - os:
                     properties:
                        - architecture: { valid_values: [ x86_64, i386, arm64, armel, armhf ] }
                        - type: { equal: linux }
                        - distribution: { equal: ubuntu }
                  - resource:
                     properties:
                        - type: { valid_values: [ cloud, edge ] }

   processing_node_eu_prestocloud_application_classes_AudioAnalytics_testMethod1_5:
      description: A TOSCA description of a node
      derived_from: prestocloud.nodes.agent.jppf
      requirements:
         - host:
            capability: tosca.capabilities.Container
            node: prestocloud.nodes.compute
            relationship: tosca.relationships.HostedOn
            occurrences: [ 1,1 ]
            node_filter:
               capabilities:
                  - host:
                     properties:
                        - num_cpus: { in_range: [ 4,8 ] }
                        - mem_size: { in_range: [ 4,8 ] }
                        - disk_size: { in_range: [ 40,100 ] }
                  - os:
                     properties:
                        - architecture: { valid_values: [ x86_64, i386, arm64, armel, armhf ] }
                        - type: { equal: linux }
                        - distribution: { equal: ubuntu }
                  - resource:
                     properties:
                        - type: { valid_values: [ cloud, edge ] }

   processing_node_eu_prestocloud_application_classes_AudioAnalytics_detectSilence_6:
      description: A TOSCA description of a node
      derived_from: prestocloud.nodes.agent.jppf
      requirements:
         - host:
            capability: tosca.capabilities.Container
            node: prestocloud.nodes.compute
            relationship: tosca.relationships.HostedOn
            occurrences: [ 1,1 ]
            node_filter:
               capabilities:
                  - host:
                     properties:
                        - num_cpus: { in_range: [ 4,8 ] }
                        - mem_size: { in_range: [ 4,8 ] }
                        - disk_size: { in_range: [ 40,100 ] }
                  - os:
                     properties:
                        - architecture: { valid_values: [ x86_64, i386, arm64, armel, armhf ] }
                        - type: { equal: linux }
                        - distribution: { equal: ubuntu }
                  - resource:
                     properties:
                        - type: { valid_values: [ cloud, edge ] }

   processing_node_eu_prestocloud_application_classes_AudioAnalytics_detectActiveIncidents_7:
      description: A TOSCA description of a node
      derived_from: prestocloud.nodes.agent.jppf
      requirements:
         - host:
            capability: tosca.capabilities.Container
            node: prestocloud.nodes.compute
            relationship: tosca.relationships.HostedOn
            occurrences: [ 1,5 ]
            node_filter:
               capabilities:
                  - host:
                     properties:
                        - num_cpus: { in_range: [ 8,16 ] }
                        - mem_size: { in_range: [ 8,16 ] }
                        - disk_size: { in_range: [ 2000,4000 ] }
                  - os:
                     properties:
                        - architecture: { valid_values: [ x86_64, arm64, armel, armhf ] }
                        - type: { equal: linux }
                        - distribution: { equal: ubuntu }
                  - resource:
                     properties:
                        - type: { valid_values: [ cloud, edge ] }

   processing_node_eu_prestocloud_application_classes_AudioAnalytics_overloaded_1:
      description: A TOSCA description of a node
      derived_from: prestocloud.nodes.agent.jppf
      requirements:
         - host:
            capability: tosca.capabilities.Container
            node: prestocloud.nodes.compute
            relationship: tosca.relationships.HostedOn
            occurrences: [ 1,1 ]
            node_filter:
               capabilities:
                  - host:
                     properties:
                        - num_cpus: { in_range: [ 16,32 ] }
                        - mem_size: { in_range: [ 8,16 ] }
                        - disk_size: { in_range: [ 100,500 ] }
                  - os:
                     properties:
                        - architecture: { equal: x86_64 }
                        - type: { equal: linux }
                        - distribution: { equal: ubuntu }
                  - resource:
                     properties:
                        - type: { equal: cloud }

   processing_node_eu_prestocloud_application_classes_AudioAnalytics_overloaded_2:
      description: A TOSCA description of a node
      derived_from: prestocloud.nodes.agent.jppf
      requirements:
         - host:
            capability: tosca.capabilities.Container
            node: prestocloud.nodes.compute
            relationship: tosca.relationships.HostedOn
            occurrences: [ 1,1 ]
            node_filter:
               capabilities:
                  - host:
                     properties:
                        - num_cpus: { in_range: [ 16,32 ] }
                        - mem_size: { in_range: [ 8,16 ] }
                        - disk_size: { in_range: [ 100,500 ] }
                  - os:
                     properties:
                        - architecture: { equal: x86_64 }
                        - type: { equal: linux }
                        - distribution: { equal: ubuntu }
                  - resource:
                     properties:
                        - type: { equal: cloud }
         #- master: jppf_master_node_10


   jppf_master_node_10:
      description: A master node of the topology
      derived_from: prestocloud.nodes.master.jppf
      requirements:
         - host:
            capability: tosca.capabilities.Container
            node: prestocloud.nodes.compute
            relationship: tosca.relationships.HostedOn
            occurrences: [ 1,2 ]
            node_filter:
               capabilities:
                  - host:
                     properties:
                        - num_cpus: { in_range: [ 2,4 ] }
                        - mem_size: { in_range: [ 4,8 ] }
                        - disk_size: { in_range: [ 4,8 ] }
                  - os:
                     properties:
                        - architecture: { equal: x86_64 }
                        - type: { equal: linux }
                        - distribution: { equal: ubuntu }
                  - resource:
                     properties:
                        - type: { equal: cloud }

topology_template:

   policies:
      - collocation_policy_group_0:
         type: prestocloud.placement.Gather
         targets: [ eu_prestocloud_application_classes_AudioAnalytics_detectActiveIncidents, eu_prestocloud_application_classes_AudioAnalytics_getData, eu_prestocloud_application_classes_AudioAnalytics_runAlgorithm ]

      - collocation_policy_group_1:
         type: prestocloud.placement.Gather
         targets: [ eu_prestocloud_application_classes_AudioAnalytics_detectSilence, eu_prestocloud_application_classes_AudioAnalytics_testMethod2, eu_prestocloud_application_classes_AudioAnalytics_testMethod1, eu_prestocloud_application_classes_AudioAnalytics_detectShout, eu_prestocloud_application_classes_AudioAnalytics_overloaded_1 ]

      - anti_affinity_group_0:
         type: prestocloud.placement.Lonely
         targets: [ eu_prestocloud_application_classes_AudioAnalytics_runAlgorithm, eu_prestocloud_application_classes_AudioAnalytics_detectShout, eu_prestocloud_application_classes_AudioAnalytics_detectSilence, eu_prestocloud_application_classes_AudioAnalytics_testMethod2, eu_prestocloud_application_classes_AudioAnalytics_testMethod1, eu_prestocloud_application_classes_AudioAnalytics_overloaded_1 ]

   node_templates:
      getData_0:
         type: processing_node_eu_prestocloud_application_classes_AudioAnalytics_getData_0

      eu_prestocloud_application_classes_AudioAnalytics_getData:
         type: prestocloud.nodes.fragment.jppf
         properties:
            id: 0
            name: eu.prestocloud.application_classes.AudioAnalytics.getData
            onloadable: true
         requirements:
            - execute: getData_0

      doNothing_1:
         type: processing_node_eu_prestocloud_application_classes_AudioAnalytics_doNothing_1

      eu_prestocloud_application_classes_AudioAnalytics_doNothing:
         type: prestocloud.nodes.fragment.jppf
         properties:
            id: 1
            name: eu.prestocloud.application_classes.AudioAnalytics.doNothing
            onloadable: true
         requirements:
            - execute: doNothing_1

      detectShout_2:
         type: processing_node_eu_prestocloud_application_classes_AudioAnalytics_detectShout_2

      eu_prestocloud_application_classes_AudioAnalytics_detectShout:
         type: prestocloud.nodes.fragment.jppf
         properties:
            id: 2
            name: eu.prestocloud.application_classes.AudioAnalytics.detectShout
            onloadable: true
         requirements:
            - execute: detectShout_2

      runAlgorithm_3:
         type: processing_node_eu_prestocloud_application_classes_AudioAnalytics_runAlgorithm_3

      eu_prestocloud_application_classes_AudioAnalytics_runAlgorithm:
         type: prestocloud.nodes.fragment.jppf
         properties:
            id: 3
            name: eu.prestocloud.application_classes.AudioAnalytics.runAlgorithm
            onloadable: true
         requirements:
            - execute: runAlgorithm_3

      testMethod2_4:
         type: processing_node_eu_prestocloud_application_classes_AudioAnalytics_testMethod2_4

      eu_prestocloud_application_classes_AudioAnalytics_testMethod2:
         type: prestocloud.nodes.fragment.jppf
         properties:
            id: 4
            name: eu.prestocloud.application_classes.AudioAnalytics.testMethod2
            onloadable: true
         requirements:
            - execute: testMethod2_4

      testMethod1_5:
         type: processing_node_eu_prestocloud_application_classes_AudioAnalytics_testMethod1_5

      eu_prestocloud_application_classes_AudioAnalytics_testMethod1:
         type: prestocloud.nodes.fragment.jppf
         properties:
            id: 5
            name: eu.prestocloud.application_classes.AudioAnalytics.testMethod1
            onloadable: true
         requirements:
            - execute: testMethod1_5

      detectSilence_6:
         type: processing_node_eu_prestocloud_application_classes_AudioAnalytics_detectSilence_6

      eu_prestocloud_application_classes_AudioAnalytics_detectSilence:
         type: prestocloud.nodes.fragment.jppf
         properties:
            id: 6
            name: eu.prestocloud.application_classes.AudioAnalytics.detectSilence
            onloadable: true
         requirements:
            - execute: detectSilence_6

      detectActiveIncidents_7:
         type: processing_node_eu_prestocloud_application_classes_AudioAnalytics_detectActiveIncidents_7

      eu_prestocloud_application_classes_AudioAnalytics_detectActiveIncidents:
         type: prestocloud.nodes.fragment.jppf
         properties:
            id: 7
            name: eu.prestocloud.application_classes.AudioAnalytics.detectActiveIncidents
            onloadable: true
         requirements:
            - execute: detectActiveIncidents_7

      eu_prestocloud_application_classes_AudioAnalytics_8:
         type: processing_node_eu_prestocloud_application_classes_AudioAnalytics_overloaded_1

      eu_prestocloud_application_classes_AudioAnalytics_overloaded_1:
         type: prestocloud.nodes.fragment.jppf
         properties:
            id: 8
            name: eu.prestocloud.application_classes.AudioAnalytics
            onloadable: false
         requirements:
            - execute: eu_prestocloud_application_classes_AudioAnalytics_8

      eu_prestocloud_application_classes_AudioAnalytics_9:
         type: processing_node_eu_prestocloud_application_classes_AudioAnalytics_overloaded_2

      eu_prestocloud_application_classes_AudioAnalytics_overloaded_2:
         type: prestocloud.nodes.fragment.jppf
         properties:
            id: 9
            name: eu.prestocloud.application_classes.AudioAnalytics
            onloadable: false
         requirements:
            - execute: eu_prestocloud_application_classes_AudioAnalytics_9

      coordinator_node:
         type: jppf_master_node_10
