tosca_definitions_version: tosca_prestocloud_mapping_1_2

metadata:
  template_name: BtrPlace placement constraints
  template_author: ActiveEon, CNRS
  template_version: 1.0.0-SNAPSHOT

description: Placement constraints definition for BtrPlace

imports:
  - tosca-normative-types:1.2
  - placement-constraints:1.0

topology_template:

  node_templates:

    server1:
      type: tosca.nodes.Compute
    server2:
      type: tosca.nodes.Compute
    server3:
      type: tosca.nodes.Compute

    fragment1:
      type: tosca.nodes.SoftwareComponent
    fragment2:
      type: tosca.nodes.SoftwareComponent
    fragment3:
      type: tosca.nodes.SoftwareComponent

  policies:

    - test1:
        type: prestocloud.placement.Fence
        targets: [ server2, server3, fragment1, fragment2 ]

    - test2:
        type: prestocloud.placement.MaxOnline
        targets: [ server1, server2, server3 ]
        properties:
          online_nodes: 2
